package test;

public class TestEJB {
	
	static PersonTest pt;
	
	public static void main(String[] args) throws Exception {

		
		setupTests();
		
		System.out.println("Creating 3 persons...");
		addPersons();
		
		
		
		
		
		
		
		
		
		
		doTest();
		
		
		
		
		
		
		
		
		
	
		
	}

	private static void addPersons() {
		
		pt = new PersonTest();
		
		try {
			pt.setUp();
			pt.addPerson();
			System.out.println("Three persons were added to database:");
			pt.list();
		} catch (Exception e) {
			System.out.println("ERROR: Could not add persons");
			e.printStackTrace();
		}
	}

	public static void doTest() throws Exception {

		PersonTest pt = new PersonTest();
		KundeImportTest kit = new KundeImportTest();
		KontoTest kt = new KontoTest();
		System.out.println("Setting up remote beans...");
		pt.setUp();
		kit.setUp();
		kt.setUp();
		System.out.println("Adding persons using Personer-bean from PersonTest...");
		pt.addPerson();
//		pt.list();
		kt.addKonto();
		System.out.println("Listing accounts: ");
		kt.list();
		System.out.println("Adding persons using KundeImport-bean from KundeImportTest...");
		kit.testNewKunde();
//		pt.list();
		pt.remove();
		kt.remove();
		pt.tearDown();
		kit.tearDown();
		kt.tearDown();
	}
	
	public static void setupTests() throws Exception {

		KundeImportTest kit = new KundeImportTest();
		KontoTest kt = new KontoTest();
	}
	
	public static void cleanUpTests() throws Exception {
		System.out.println("Cleaning up tests..");
		pt.remove();
		pt.tearDown();
		System.out.println("Cleanup complete!");
	}
}
